<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Memory Game</title>
    <script src="https://cdn.jsdelivr.net/npm/phaser@3.55.2/dist/phaser.min.js"></script>
    <style>
        body {
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background-color: #2d2d2d;
        }
    </style>
</head>
<body>
    <script>
        class MemoryGame extends Phaser.Scene {
            constructor() {
                super({ key: 'MemoryGame' });
            }

            preload() {
                this.load.image('card', 'mainanpyxel.png');
            }

            create() {
                this.cards = [];
                this.selectedCards = [];
                this.createBoard();
            }

            createBoard() {
                let positions = this.generateCardPositions();
                positions.forEach(pos => {
                    let card = this.add.sprite(pos.x, pos.y, 'card').setInteractive();
                    card.cardId = pos.id;
                    card.open = false;
                    card.on('pointerdown', () => this.onCardClicked(card));
                    this.cards.push(card);
                });
            }

            generateCardPositions() {
                let positions = [];
                let ids = [1, 2, 3, 4, 5, 6];
                ids = ids.concat(ids); // Double the array to have pairs

                Phaser.Utils.Array.Shuffle(ids);

                for (let i = 0; i < 12; i++) {
                    let x = 100 + (i % 4) * 150;
                    let y = 100 + Math.floor(i / 4) * 150;
                    positions.push({ x: x, y: y, id: ids[i] });
                }

                return positions;
            }

            onCardClicked(card) {
                if (card.open || this.selectedCards.length === 2) {
                    return;
                }

                card.open = true;
                card.setTint(0x00ff00); // Change the color to indicate it's opened
                this.selectedCards.push(card);

                if (this.selectedCards.length === 2) {
                    this.checkForMatch();
                }
            }

            checkForMatch() {
                let [card1, card2] = this.selectedCards;

                if (card1.cardId === card2.cardId) {
                    // It's a match
                    this.selectedCards = [];
                } else {
                    // Not a match, close cards after a short delay
                    this.time.delayedCall(1000, () => {
                        card1.open = false;
                        card2.open = false;
                        card1.clearTint();
                        card2.clearTint();
                        this.selectedCards = [];
                    });
                }
            }
        }

        const config = {
            type: Phaser.AUTO,
            width: 800,
            height: 600,
            scene: MemoryGame
        };

        const game = new Phaser.Game(config);
    </script>
</body>
</html>
